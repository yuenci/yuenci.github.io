{"posts":[{"title":"Hello World","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new &quot;My New Post&quot; More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","link":"/2022/12/01/hello-world/"},{"title":"About","text":"Hi 👋, I'm yuenci A passionate full stack developer from China 👋 Introduction: 🔭 I’m currently working on A note-taking software 🌱 I’m currently learning Algorithms 👨‍💻 All of my projects are to [make the world a better and better.](make the world a better and better.) 📝 I regularly write articles on https://www.enjoycoding.me/ 💬 Ask me about Anything you want to know 📫 How to reach me yuenci1575270674@gmail.com ⚡ Fun fact I often forget to sleep because I am in programming!! 📫 Connect with me: ⚡ Languages and Tools: ❤️ Support:","link":"/2022/12/02/about/"},{"title":"Deployed a full-stack appliaction","text":"准备 首先购买服务器 然后SSH 登录服务器 或者 使用在线terminal等方式连接服务器 安装宝塔面板并开放端口 1wget -O install.sh http://download.bt.cn/install/install-ubuntu_6.0.sh &amp;&amp; sudo bash install.sh ed8484bec 安装Nginx 安装Docker 123456789101112131415sudo apt update#更新索引sudo apt install apt-transport-https ca-certificates curl gnupg-agent software-properties-common#安装依赖curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -#添加源仓库sudo apt updatesudo apt install docker-ce docker-ce-cli containerd.io#安装最新版本#查看docker状态（正常状态如下图）sudo systemctl status docker 静态资源部分 配置DNS解析 因为更换了服务器， 所以需要更改域名对应的IP 设置 Cloudflare设置为 开发模式 开发者模式不会让用户走缓存获得静态文件，而是直接去源服务器获取，这样用户可以第一时间获得最新的更新 把静态文件放到wwwroot目录下 配置Nginx 首先需要配置SSL 证书以支持Http，其次是配置 /code ,转发请求到84端口，84端口定义了将分发哪些静态文件 1234567891011121314151617181920212223server{ listen 443 ssl; server_name enjoyCoding.com; ssl on; ssl_certificate /usr/local/ssl/ssl_certificate.pem; ssl_certificate_key /usr/local/ssl/ssl_certificate_key.key; ssl_session_timeout 5m; ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4; ssl_protocols TLSv1 TLSv1.1 TLSv1.2; ssl_prefer_server_ciphers on; location /code/{ proxy_pass http://127.0.0.1:84/; }}server{ listen 84; root /www/wwwroot/What-does-this-code-mean; index index.html index.htm;} 后端部分 docker 部署 因为之前已经把镜像上传到了docker hub(wtcm)，所以无需重新制作镜像，直接运行 1$ docker run innis/wtcm:1.0 -p 83:83 不过因为该镜像的API已经过期，所以需要把镜像中的文件拷贝出来重新制作镜像 12$docker cp 266f4:/root/feedback_venv/feedback_venv.zip /Users/Downloads/# docker cp [container_created:path] [dest_path] 镜像构建文件： 1234567891011121314151617FROM python:3.8MAINTAINER Innis&lt;yuenci1575270674@gmail.com&gt;WORKDIR /appRUN pip install flask &amp;&amp; \\ pip install flask_cors &amp;&amp; \\ pip install openai &amp;&amp; \\ pip install gunicorn &amp;&amp; \\ pip install geventCOPY . /appEXPOSE 83# CMD [&quot;python&quot;, &quot;main.py&quot;]ENTRYPOINT [&quot;gunicorn&quot; ,&quot;--config&quot;, &quot;gunicorn.py&quot;, &quot;main:app&quot;] 修改完API Key的配置运行 1$sudo docker build -t wtcm:1.0 . 运行新镜像 1$sudo docker run -it -p 83:83 wtcm:1.0 Nginx 设置 Flask 路由设置 1@app.route('/response', methods=[&quot;POST&quot;]) fetch 设置 12345678910111213url = 'https://enjoycoding.me/api/response' fetch(url, options) .then(data =&gt; { if (!data.ok) { throw Error(data.status); } return data.json(); }).then(update =&gt; { //console.log(update); }).catch(e =&gt; { console.log(e); }); Nginx 设置 123location /api/{ proxy_pass http://0.0.0.0:83/; } CI/CD 部分运行root 登录 步骤 方法 修改 root 密码 执行命令sudo passwd root 输入密码 可以和 ubuntu 密码一致，也可以修改 (密码会让你输入两次) 修改 ssh 配置 执行命令sudo vi /etc/ssh/sshd_config 修 改 PermitRootLogin 进入 ssh 配置界面后找到PermitRootLogin，将它后面改为yes，保存 (按i进入编辑模式，编辑完esc退出，:w保存当前文件，:q退出) 重启 ssh 服务 执行命令 sudo service ssh restart 设置Github actions workflows file 123456789101112131415161718name: scp fileson: [push]jobs: build: name: Build runs-on: ubuntu-latest steps: - uses: actions/checkout@master - name: copy file via ssh password uses: appleboy/scp-action@master with: host: ${{ secrets.HOST }} username: ${{ secrets.USERNAME }} password: ${{ secrets.PASSWORD }} port: 22 source: &quot;./&quot; target: /www/wwwroot/What-does-this-code-mean/ 最后关闭Cloudflare的开发模式","link":"/2022/12/25/deployed-a-full-stack-appliaction/"}],"tags":[{"name":"tag1","slug":"tag1","link":"/tags/tag1/"},{"name":"Cloud Server","slug":"Cloud-Server","link":"/tags/Cloud-Server/"},{"name":"Ubuntu","slug":"Ubuntu","link":"/tags/Ubuntu/"},{"name":"Nginx","slug":"Nginx","link":"/tags/Nginx/"},{"name":"Docker","slug":"Docker","link":"/tags/Docker/"},{"name":"DNS","slug":"DNS","link":"/tags/DNS/"},{"name":"Cloudflare","slug":"Cloudflare","link":"/tags/Cloudflare/"},{"name":"CI&#x2F;CD","slug":"CI-CD","link":"/tags/CI-CD/"},{"name":"Github Actions","slug":"Github-Actions","link":"/tags/Github-Actions/"}],"categories":[],"pages":[{"title":"About","text":"Hi 👋, I'm yuenci A passionate full stack developer from China 👋 Introduction: 🔭 I’m currently working on A note-taking software 🌱 I’m currently learning Algorithms 👨‍💻 All of my projects are to [make the world a better and better.](make the world a better and better.) 📝 I regularly write articles on https://www.enjoycoding.me/ 💬 Ask me about Anything you want to know 📫 How to reach me yuenci1575270674@gmail.com ⚡ Fun fact I often forget to sleep because I am in programming!! 📫 Connect with me: ⚡ Languages and Tools: ❤️ Support:","link":"/about/index.html"},{"title":"","text":"import { initializeApp } from \"https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js\"; import { getFirestore, addDoc, collection } from \"https://www.gstatic.com/firebasejs/9.15.0/firebase-firestore.js\"; const firebaseConfig = { apiKey: \"AIzaSyAfr-AXKIqrQovmlEvH31V1LeOuT4c7QNc\", authDomain: \"nftarts-32191.firebaseapp.com\", projectId: \"nftarts-32191\", storageBucket: \"nftarts-32191.appspot.com\", messagingSenderId: \"865252345043\", appId: \"1:865252345043:web:227e3ff1b632df85328026\", measurementId: \"G-BPLH0BTZ4Z\" }; // Initialize Firebase const app = initializeApp(firebaseConfig); const db = getFirestore(app); export async function writeToDB(data) { let currentAdmin = localStorage.getItem(\"admin\") if (!currentAdmin) currentAdmin = \"Innis\" try { const docRef = await addDoc(collection(db, \"images\"), { ...data, }); console.log(\"Document written with ID: \", docRef.id); } catch (e) { console.error(\"Error adding document: \", e); } } export async function readFromDB() { const querySnapshot = await getDocs(collection(db, \"images\")); querySnapshot.forEach((doc) => { console.log(`${doc.id} => ${doc.data()}`); }); } export async function deleteFromDB(id) { await deleteDoc(doc(db, \"images\", id)); } export async function updateDB(id, data) { await updateDoc(doc(db, \"images\", id), data); }","link":"/tutorial/2022-12-30/FB_DB.js"},{"title":"","text":"Import JS 的模块化 Hello world","link":"/tutorial/2022-12-30/index.html"},{"title":"","text":"/* Submit */ import { writeToDB } from \"./FB_DB.js\"; $(\"#btn\").click(function () { var name = $(\"input[placeholder='name']\").val(); var age = $(\"input[placeholder='age']\").val(); var gender = $(\"input[placeholder='gender']\").val(); var data = { name: name, age: age, gender: gender } console.log(data); writeToDB(data); })","link":"/tutorial/2022-12-30/from.js"},{"title":"","text":"export let div = document.getElementById('id1');","link":"/tutorial/2022-12-30/js1.js"},{"title":"","text":"Form To DB input { display: block; margin: 10px; } Submit","link":"/tutorial/2022-12-30/form.html"},{"title":"","text":"export function getTime() { return Date.now().toLocaleString(); }","link":"/tutorial/2022-12-30/js3.js"},{"title":"","text":"import { getTime } from './js3.js'; import { div } from './js1.js'; div.innerHTML = getTime();","link":"/tutorial/2022-12-30/js2.js"},{"title":"","text":"/*! jQuery v1.12.4 | (c) jQuery Foundation | jquery.org/license */ !function(a,b){\"object\"==typeof module&&\"object\"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error(\"jQuery requires a window with a document\");return b(a)}:b(a)}(\"undefined\"!=typeof window?window:this,function(a,b){var c=[],d=a.document,e=c.slice,f=c.concat,g=c.push,h=c.indexOf,i={},j=i.toString,k=i.hasOwnProperty,l={},m=\"1.12.4\",n=function(a,b){return new n.fn.init(a,b)},o=/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g,p=/^-ms-/,q=/-([\\da-z])/gi,r=function(a,b){return b.toUpperCase()};n.fn=n.prototype={jquery:m,constructor:n,selector:\"\",length:0,toArray:function(){return e.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:e.call(this)},pushStack:function(a){var b=n.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a){return n.each(this,a)},map:function(a){return this.pushStack(n.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(e.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor()},push:g,sort:c.sort,splice:c.splice},n.extend=n.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for(\"boolean\"==typeof g&&(j=g,g=arguments[h]||{},h++),\"object\"==typeof g||n.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(e=arguments[h]))for(d in e)a=g[d],c=e[d],g!==c&&(j&&c&&(n.isPlainObject(c)||(b=n.isArray(c)))?(b?(b=!1,f=a&&n.isArray(a)?a:[]):f=a&&n.isPlainObject(a)?a:{},g[d]=n.extend(j,f,c)):void 0!==c&&(g[d]=c));return g},n.extend({expando:\"jQuery\"+(m+Math.random()).replace(/\\D/g,\"\"),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return\"function\"===n.type(a)},isArray:Array.isArray||function(a){return\"array\"===n.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){var b=a&&a.toString();return!n.isArray(a)&&b-parseFloat(b)+1>=0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},isPlainObject:function(a){var b;if(!a||\"object\"!==n.type(a)||a.nodeType||n.isWindow(a))return!1;try{if(a.constructor&&!k.call(a,\"constructor\")&&!k.call(a.constructor.prototype,\"isPrototypeOf\"))return!1}catch(c){return!1}if(!l.ownFirst)for(b in a)return k.call(a,b);for(b in a);return void 0===b||k.call(a,b)},type:function(a){return null==a?a+\"\":\"object\"==typeof a||\"function\"==typeof a?i[j.call(a)]||\"object\":typeof a},globalEval:function(b){b&&n.trim(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(p,\"ms-\").replace(q,r)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b){var c,d=0;if(s(a)){for(c=a.length;c>d;d++)if(b.call(a[d],d,a[d])===!1)break}else for(d in a)if(b.call(a[d],d,a[d])===!1)break;return a},trim:function(a){return null==a?\"\":(a+\"\").replace(o,\"\")},makeArray:function(a,b){var c=b||[];return null!=a&&(s(Object(a))?n.merge(c,\"string\"==typeof a?[a]:a):g.call(c,a)),c},inArray:function(a,b,c){var d;if(b){if(h)return h.call(b,a,c);for(d=b.length,c=c?0>c?Math.max(0,d+c):c:0;d>c;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,b){var c=+b.length,d=0,e=a.length;while(c>d)a[e++]=b[d++];if(c!==c)while(void 0!==b[d])a[e++]=b[d++];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,e,g=0,h=[];if(s(a))for(d=a.length;d>g;g++)e=b(a[g],g,c),null!=e&&h.push(e);else for(g in a)e=b(a[g],g,c),null!=e&&h.push(e);return f.apply([],h)},guid:1,proxy:function(a,b){var c,d,f;return\"string\"==typeof b&&(f=a[b],b=a,a=f),n.isFunction(a)?(c=e.call(arguments,2),d=function(){return a.apply(b||this,c.concat(e.call(arguments)))},d.guid=a.guid=a.guid||n.guid++,d):void 0},now:function(){return+new Date},support:l}),\"function\"==typeof Symbol&&(n.fn[Symbol.iterator]=c[Symbol.iterator]),n.each(\"Boolean Number String Function Array Date RegExp Object Error Symbol\".split(\" \"),function(a,b){i[\"[object \"+b+\"]\"]=b.toLowerCase()});function s(a){var b=!!a&&\"length\"in a&&a.length,c=n.type(a);return\"function\"===c||n.isWindow(a)?!1:\"array\"===c||0===b||\"number\"==typeof b&&b>0&&b-1 in a}var t=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u=\"sizzle\"+1*new Date,v=a.document,w=0,x=0,y=ga(),z=ga(),A=ga(),B=function(a,b){return a===b&&(l=!0),0},C=1","link":"/tutorial/2022-12-30/jquery-1.12.4.min.js"}]}